<div class="flex justify-between pl-5 mt-4 mb-4"
     id="organization_table_join_request">
  <div class="overflow-x-auto">
    <table class="table-auto table-fixed border-collapse lg:w-full min-w-full mt-2">
      <thead class="bg-gray-800 text-white">
        <tr class="text-center">
          <th class="px-4 py-2">Organization Name</th>
          <th class="px-4 py-2">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for organization in organizations_not_a_member_of %}
          <tr>
            <td class="border px-4 py-2 overflow-hidden whitespace-normal">{{ organization.name }}</td>
            <td class="border px-4 py-2">
              <div class="flex flex-wrap gap-2">
                <!-- Join Request Button -->
                <button hx-post="{% url 'accounts:organization_join_request' organization_slug=organization.slug %}"
                        hx-target="#organization_table_join_request"
                        hx-swap="outerHTML"
                        hx-trigger='confirm_organization_join_request'
                        onClick="Swal.fire({ title: 'Are you sure?', text: 'Request to join Organization {{ organization.name }}?', icon: 'warning', showCancelButton: true, confirmButtonColor: '#22C55E', cancelButtonColor: '#EF4444', confirmButtonText: 'Yes, Request Join!' }).then((result) => { if (result.isConfirmed) { htmx.trigger(this, 'confirm_organization_join_request'); Swal.fire({ title: 'Requested!', timer: 2000, text: 'The admin will have to approve your request.', icon: 'success' }); } });"
                        class="text-slate-800 hover:text-green-600 text-sm bg-white hover:bg-slate-100 border border-slate-200 rounded-md font-medium px-2 py-1 flex items-center justify-center transition-all duration-300 ease-in-out group">
                  <svg xmlns="http://www.w3.org/2000/svg"
                       fill="none"
                       viewBox="0 0 24 24"
                       stroke-width="1.5"
                       stroke="currentColor"
                       class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H2.25" />
                  </svg>
                  <span class="ml-2 hidden sm:inline-block group-hover:inline-block">Request to Join</span>
                </button>
              </div>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
